
<!doctype html>
<html lang="en">
<head>
   

     <!--Material design from http://materializecss.com/getting-started.html-->
          <link href="http://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
          <!--Import materialize.css-->

          <!--Let browser know website is optimized for mobile-->
          <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

    <meta charset="utf-8">

    <title>How's My Kid</title>
    <!-- Firebase CDN -->
        <script src="https://www.gstatic.com/firebasejs/3.5.1/firebase.js"></script>
        <script src="https://www.gstatic.com/firebasejs/3.5.0/firebase-app.js"></script>
        <script src="https://www.gstatic.com/firebasejs/3.5.0/firebase-database.js"></script>
        <script src="js/jquery-3.0.0.js"></script>

  <!-- Filestack JS library for uploading photos -->
        <script type="text/javascript" src="http://api.filestackapi.com/filestack.js"></script>

    
    <!-- linking in the CSS file -->
    <link rel="stylesheet" href="home.css" type="text/css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Merriweather" type="text/css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Droid+Sans" type="text/css">
    <link type="text/css" rel="stylesheet" href="https://www.gstatic.com/firebasejs/ui/live/0.5/firebase-ui-auth.css">

</head>

<body>
      <script type="text/javascript" src="js/materialize.min.js"></script>


<h2>HOW'S MY KID</h2>
<h1> Track the activities of your child<span id='greeting'></span>
</h1>


<style> /*for the dropdown only*/
.dropbtn {
    background-color: #4CAF50;
    color: white;
    padding: 16px;
    font-size: 16px;
    border: none;
    cursor: pointer;
}

.dropbtn:hover, .dropbtn:focus {
    background-color: #3e8e41;
}

.dropdown {
    position: relative;
    float:  left;
    display: inline-block;
}

.dropdown-content {
    display: none;
    position: absolute;
    background-color: #f9f9f9;
    min-width: 160px;
    overflow: auto;
    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
}

.dropdown-content a {
    color: black;
    padding: 12px 16px;
    text-decoration: none;
    display: block;
}

.dropdown a:hover {background-color: #f1f1f1}

.show {display:block;}
</style>

<div class="dropdown">
<button onclick="myFunction()" class="dropbtn">Menu</button>
  <div id="myDropdown" class="dropdown-content">
    <a href="timeline.html">Milestones</a>
    <a href="stories.html">Stories</a>
    <a href="todo.html">Todos</a>
    <a href="childSettings.html">Settings (add child)</a>
  </div>
</div>

<script>
/* When the user clicks on the button,
toggle between hiding and showing the dropdown content */
function myFunction() {
    document.getElementById("myDropdown").classList.toggle("show");
}

// Close the dropdown if the user clicks outside of it
window.onclick = function(event) {
  if (!event.target.matches('.dropbtn')) {

    var dropdowns = document.getElementsByClassName("dropdown-content");
    var i;
    for (i = 0; i < dropdowns.length; i++) {
      var openDropdown = dropdowns[i];
      if (openDropdown.classList.contains('show')) {
        openDropdown.classList.remove('show');
      }
    }
  }
}
</script>



<script>

function greeting() {
  $('#greeting').append(", " + window.response_name + "!");
}

// This is called with the results from FB.getLoginStatus().
// Source of this code is https://developers.facebook.com/docs/facebook-login/web
  function statusChangeCallback(response) {
    // The response object is returned with a status field that lets the
    // app know the current login status of the person.
    // Full docs on the response object can be found in the documentation
    // for FB.getLoginStatus().
    if (response.status === 'connected') {
      // Logged into your app and Facebook.
      testAPI();
    } else if (response.status === 'not_authorized') {
      // The person is logged into Facebook, but not your app.
      document.getElementById('status').innerHTML = 'Please log ' +
        'into this app.';
    } else {
      // The person is not logged into Facebook, so we're not sure if
      // they are logged into this app or not.
      document.getElementById('status').innerHTML = 'Please log ' +
        'into Facebook.';
    }
  }

  // This function is called when someone finishes with the Login
  // Button.  See the onlogin handler attached to it in the sample
  // code below.
  function checkLoginState() {
    FB.getLoginStatus(function(response) {
      statusChangeCallback(response);
    });
  };

  window.fbAsyncInit = function() {
    FB.Event.subscribe('auth.statusChange', statusChangeCallback);

    FB.init({
      appId      : '322512288126012',
      cookie     : true,  // enable cookies to allow the server to access 
                          // the session
      xfbml      : true,  // parse social plugins on this page
      version    : 'v2.8', // use graph api version 2.5
      status     : true, 
    });

    // Now that we've initialized the JavaScript SDK, we call 
    // FB.getLoginStatus().  This function gets the state of the
    // person visiting this page and can return one of three states to
    // the callback you provide.  They can be:
    //
    // 1. Logged into your app ('connected')
    // 2. Logged into Facebook, but not your app ('not_authorized')
    // 3. Not logged into Facebook and can't tell if they are logged into
    //    your app or not.
    //
    // These three cases are handled in the callback function.
   
    
    FB.getLoginStatus(function(response) {
      if (response.status === 'connected') {
        // the user is logged in and has authenticated your
        // app, and response.authResponse supplies
        // the user's ID, a valid access token, a signed
        // request, and the time the access token 
        // and signed request each expire
        var uid = response.authResponse.userID;
        var accessToken = response.authResponse.accessToken;
        //console.log(response);
        //console.log(response.name);
  

      } else if (response.status === 'not_authorized') {
        // the user is logged in to Facebook, 
        // but has not authenticated your app
      } else {
        // the user isn't logged in to Facebook.
      }
     });
  };
  


  // Load the SDK asynchronously
  (function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_US/sdk.js";
    fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'facebook-jssdk'));

  // Here we run a very simple test of the Graph API after login is
  // successful.  See statusChangeCallback() for when this call is made.
  function testAPI() {
    console.log('Welcome!  Fetching your information.... ');
    FB.api('/me', function(response) {
      console.log('Successful login for: ' + response.name);
      //document.getElementById('status').innerHTML =
      //  'Thanks for logging in, ' + response.name + '!';

      window.response_name = response.name;
      
       //invoke greeting
        greeting();

    });
}

</script>



<div>

<div>

<div class="card card-2">Track the important details of your child's days
  <br> <a href="addStory.html"><img src="voice.png" height="40%"; width="40%"> </a>
</div>
<div class="card card-2">See an overview of your child's key milestones
    <br><a href="timeline.html"><img src="time.png" height="40%"; width="40%"></a>
</div>
<div class="card card-2">Store to dos and key questions for the pediatrician.
    <br> <a href="todo.html"><img src="todos.png" height="40%"; width="40%"></a>
</div>



 <fb:login-button data-size="large" data-show-faces="true" scope="public_profile,email" autologoutlink="true" onlogin="checkLoginState()";>
</fb:login-button>


<!-- Add a to-do list item -->


</center>
</body>
</html>



